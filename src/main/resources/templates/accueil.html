<html lang="fr">
<head>
    <link href="//netdna.bootstrapcdn.com/twitter-bootstrap/2.3.1/css/bootstrap-combined.min.css" rel="stylesheet"/>
    <link href="//netdna.bootstrapcdn.com/twitter-bootstrap/2.3.1/css/bootstrap-responsive.min.css" rel="stylesheet"/>
    <link href="//netdna.bootstrapcdn.com/bootswatch/2.3.1/slate/bootstrap.min.css" rel="stylesheet"/>
    <!--<script src="//netdna.bootstrapcdn.com/twitter-bootstrap/2.3.1/js/bootstrap.min.js"></script>-->
</head>
<body>
<div id="fb-root"></div>
<script>
  window.fbAsyncInit = function() {
  FB.init({
    appId      : '534797699899674', // App ID
    //channelUrl : '//WWW.YOUR_DOMAIN.COM/channel.html', // Channel File (?)
    status     : true, // verifie le login
    cookie     : true, // enable cookies to allow the server to access the session
    xfbml      : true  // parse XFBML (pour recupérer les données de FB.response
  });
    
  FB.Event.subscribe('auth.authResponseChange', function(response) {
    if (response.status === 'connected') {
      testAPI();
    } else if (response.status === 'not_authorized') {
      FB.login();
    } else {
      FB.login();
    }
  });
  };

  // Load the SDK asynchronously
  (function(d){
   var js, id = 'facebook-jssdk', ref = d.getElementsByTagName('script')[0];
   if (d.getElementById(id)) {return;}
   js = d.createElement('script'); js.id = id; js.async = true;
  js.src = "//connect.facebook.net/en_US/all.js";//url du sdk
   ref.parentNode.insertBefore(js, ref);
  }(document));

  function test2API() {
    //console.log('Bienvenue! Peuple les infos... ');
    //FB.api('/me', function(response) {
     // alert('Salut, ' + response.name + '!');
    //});
  }
  
  function actionLogin() {
  	
  	console.log("action login\n");
  	console.log("/registered/"+document.getElementById("username").value);
  	console.log("\n");
  	return("/registered/"+document.getElementById("username").value);
  }
  
  //alert("test1Basique");

</script>
<div class="navbar navbar-fixed-top">
    <div class="navbar-inner">
        <ul class="nav">
            <li><a href="/questions">Voir toutes les questions</a></li>
            <li><a href="/nouvelle-question">Créer une nouvelle question</a></li>
            <li><a href="/generer-quizz">Generer un quizz</a></li>
            <li><a href="/quizzs">Voir tout les quizzs</a></li>
            </ul>
    </div>
</div>
<br/>
<br/>
<br/>
<br/>
<br/>
<br/>
<br/>
<div class="container">
    <div class="row-fluid">
        <div class="span12">
        <h2> Login :</h2>
        <table>
        <td>
        <form id="login" method="post" action="/registered">
			<p>Username : </p>
			<input id="username" type="text" name="username" /><br/>
			<p>Mot de passe : </p>
			<input type="password" name="password" /><br/>
			<button type="submit" class="btn">Login</button><br/>
		</form></td>
		<td>
		<fb:login-button show-faces="true" width="200" max-rows="1" size="large"></fb:login-button><br/>
		</td>
		</table>

		<h2> Inscription :</h2>
		<table>
		<td>
        <form method="post" action="/register">
        	<p>Email: </p>
			<input type="text" name="email" /><br/>
			<p>Age : </p>
			<input type="text" name="age" /><br/>			
			<p>Username choisi: </p>
			<input type="text" name="username" id="username_register" /><br/>
			<p>Mot de passe : </p>
			<input type="password" name="password" /><br/>
			<p>Confirmer Mot de passe : </p>
			<input type="password" name="password" /><br/>
			<button type="submit" class="btn">S'inscrire</button><br/>
		</form></td><td>  
		<iframe src="https://www.facebook.com/plugins/registration?client_id=113869198637480&amp;redirect_uri=https%3A%2F%2Fdevelopers.facebook.com%2Ftools%2Fecho%2F&amp;fields=name,birthday,gender,location,email" scrolling="auto" frameborder="no" style="border:none" allowTransparency="true" width="100%" height="330"></iframe>
		</td>
		</table>
        </div>
    </div>
</div>
<script src="http://code.jquery.com/jquery-1.9.1.min.js"></script>
<script type="text/javascript">
    $(function () {
        $("form").submit(function (event) {
            console.log("yaa");
            var formulaire = $(this);
            $.post(formulaire.attr("action"), formulaire.serialize(), function (data, textStatus, jqXhr) {
                window.location = jqXhr.getResponseHeader("Location");

            });
            return false;
        });
    });
    
    function pvalidate() {
	if (document.registration.password.value != document.registration.passwordcheck.value)
	{
			alert('Veuillez taper le même mot de passe !');
			return false;
		}
	else
	{
	return true;
	}
}
</script>
</body>
</html>